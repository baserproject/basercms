(()=>{"use strict";var e,t={9525:(e,t,i)=>{var n=i(2288),o=i(1784),r={id:"FavoriteListWrap"},a={class:"bca-nav-favorite-title"},l=["aria-expanded"],s=["id","data-id","onMousedown"],d=["href","title"],c={class:"bca-nav-favorite-list-item-label"},u={class:"no-data"},f={id:"FavoriteDialog",class:"ui-widget"},v=["disabled"];var p=i(6472),h=i(2746),b={method:"POST",id:"FavoriteAjaxForm"},m={class:"bca-main__header-title"},k=["value"],y=["value"],g={for:"FavoriteName"},F={class:"bca-textbox"},w=["placeholder"],x={key:0,class:"invalid-feedback"},S={class:"bca-textbox"},T=["placeholder"],U={key:0,class:"invalid-feedback"};var L=i(9639),I=i(3855);const O={name:"FavoriteForm",setup:function(){return{v$:(0,L.fG)()}},data:function(){return{alertRequire:bcI18n.alertRequire,windowTitle:null,addTitle:bcI18n.addTitle,editTitle:bcI18n.editTitle,labelTitle:bcI18n.labelTitle,labelUrl:bcI18n.labelUrl,name:"",url:"",id:""}},validations:function(){return{name:{required:I.mw},url:{required:I.mw}}},props:["userId","currentPageName","currentPageUrl","currentFavorite"],mounted:function(){this.currentFavorite?(this.id=this.currentFavorite.id,this.name=this.currentFavorite.name,this.url=this.currentFavorite.url,this.windowTitle=this.editTitle):(this.name=this.currentPageName,this.url=this.currentPageUrl,this.windowTitle=this.addTitle)},methods:{formUpdated:function(){this.$emit("formUpdated",this.v$.$invalid)},formSubmit:function(){var e;e=this.id?$.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/edit/"+this.id+".json":$.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/add.json";var t=this.userId,i=this.name,n=this.url,o=this;$.bcToken.check(function(){p.A.post(e,{user_id:t,name:i,url:n,_csrfToken:$.bcToken.key}).then(function(e){e.data&&($("#Waiting").hide(),$.bcToken.key=null,o.$emit("formSubmitted"))}.bind(this)).catch(function(e){if(e.response){var t=e.response.data.message+"\n",i=e.response.data.errors;Object.keys(i).forEach(function(e){Object.keys(i[e]).forEach(function(n){t=t+"\n"+i[e][n]})}),alert(t)}else console.log("Error",e.message);$("#Waiting").hide(),$.bcToken.key=null,o.$emit("formSubmitted")})},{useUpdate:!1,hideLoader:!1})}}};var M=i(7433);var E={class:"modal-window"},A={class:"modal-content"},C={class:"modal-footer"};const j={props:{scrollable:Boolean},data:function(){return{showModal:!1}},methods:{openModal:function(e){this.showModal=!0,this.$nextTick(function(){this.scrollable?($(".modal-overlay").css("align-items","normal"),$(".modal-window").css("overflow","scroll").css("display","grid")):($(".modal-overlay").css("align-items","center"),$(".modal-window").css("overflow","hidden")),this.$emit("modal-opened",e)})},closeModal:function(){this.$emit("modal-closed"),this.showModal=!1}}},B={data:function(){return{favoriteBoxOpened:"none",buttonSubmit:bcI18n.buttonSubmit,buttonCancel:bcI18n.buttonCancel,i18nFavorite:bcI18n.i18nFavorite,i18nNoData:bcI18n.i18nNoData,i18nEdit:bcI18n.i18nEdit,i18nDelete:bcI18n.i18nDelete,favorites:[],ariaExpanded:"true",baseUrl:$.bcUtil.baseUrl,formError:!1,favorite:{},currentFavorite:null}},props:["userId","currentPageName","currentPageUrl"],components:{FavoriteForm:(0,M.A)(O,[["render",function(e,t,i,r,a,l){return(0,n.uX)(),(0,n.CE)("form",b,[(0,n.Lk)("h2",m,(0,o.toDisplayString)(a.windowTitle),1),(0,n.Lk)("input",{type:"hidden",name:"id",value:a.id},null,8,k),(0,n.Lk)("input",{type:"hidden",name:"user_id",value:i.userId},null,8,y),t[7]||(t[7]=(0,n.Lk)("input",{type:"hidden",name:"_csrfToken"},null,-1)),(0,n.Lk)("dl",null,[(0,n.Lk)("dt",null,[(0,n.Lk)("label",g,(0,o.toDisplayString)(a.labelTitle),1)]),(0,n.Lk)("dd",null,[(0,n.Lk)("span",F,[(0,n.bo)((0,n.Lk)("input",{class:"required",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.name=e}),id:"FavoriteName",placeholder:a.labelTitle,size:"30",name:"name",onInput:t[1]||(t[1]=function(){return l.formUpdated&&l.formUpdated.apply(l,arguments)}),autofocus:""},null,40,w),[[h.vModelText,a.name]])]),t[4]||(t[4]=(0,n.Lk)("br",null,null,-1)),r.v$.name.$invalid?((0,n.uX)(),(0,n.CE)("div",x,(0,o.toDisplayString)(a.alertRequire),1)):(0,n.Q3)("v-if",!0)]),(0,n.Lk)("dt",null,[t[5]||(t[5]=(0,n.Lk)("label",{for:"FavoriteUrl"},null,-1)),(0,n.eW)((0,o.toDisplayString)(a.labelUrl),1)]),(0,n.Lk)("dd",null,[(0,n.Lk)("span",S,[(0,n.bo)((0,n.Lk)("input",{class:"required",type:"text","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.url=e}),id:"FavoriteUrl",placeholder:a.labelUrl,size:"30",name:"url",onInput:t[3]||(t[3]=function(){return l.formUpdated&&l.formUpdated.apply(l,arguments)})},null,40,T),[[h.vModelText,a.url]])]),t[6]||(t[6]=(0,n.Lk)("br",null,null,-1)),r.v$.url.$invalid?((0,n.uX)(),(0,n.CE)("div",U,(0,o.toDisplayString)(a.alertRequire),1)):(0,n.Q3)("v-if",!0)])])])}]]),Modal:(0,M.A)(j,[["render",function(e,t,i,o,r,a){return e.showModal?((0,n.uX)(),(0,n.Wv)(h.Transition,{key:0,name:"modal",appear:""},{default:(0,n.k6)(function(){return[(0,n.Lk)("div",{class:"modal modal-overlay",onClick:t[1]||(t[1]=(0,h.withModifiers)(function(){return a.closeModal&&a.closeModal.apply(a,arguments)},["self"]))},[(0,n.Lk)("div",E,[(0,n.Lk)("div",A,[(0,n.RG)(e.$slots,"default")]),(0,n.Lk)("footer",C,[(0,n.RG)(e.$slots,"footer",{},function(){return[(0,n.Lk)("button",{onClick:t[0]||(t[0]=function(){return a.closeModal&&a.closeModal.apply(a,arguments)}),type:"button"},"Close")]})])])])]}),_:3})):(0,n.Q3)("v-if",!0)}]])},mounted:function(){this.initFavorite()},methods:{formUpdated:function(e){this.formError=e},initFavorite:function(){this.refresh();var e=$.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/get_favorite_box_opened.json";p.A.get(e).then(function(e){"1"===e.data.result?(this.favoriteBoxOpened="block",this.ariaExpanded="false"):(this.favoriteBoxOpened="none",this.ariaExpanded="true")}.bind(this)),$.contextMenu({selector:".favorite-menu-list li",items:{FavoriteEdit:{name:bcI18n.i18nEdit,icon:"edit"},FavoriteDelete:{name:bcI18n.i18nDelete,icon:"delete"}},callback:this.contextMenuClickHandler})},changeSelected:function(e){this.currentFavorite=e},changeOpenFavorite:function(){var e=$.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/save_favorite_box";"block"===this.favoriteBoxOpened?(this.favoriteBoxOpened="none",this.ariaExpanded="true",$.bcToken.check(function(){p.A.post(e+".json",{},{headers:{"X-CSRF-Token":$.bcToken.key}})},{loaderType:"none"})):(this.favoriteBoxOpened="block",this.ariaExpanded="false",$.bcToken.check(function(){p.A.post(e+"/1.json",{},{headers:{"X-CSRF-Token":$.bcToken.key}})},{loaderType:"none"}))},refresh:function(){var e=$.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/index.json";p.A.get(e).then(function(e){this.favorites=e.data.favorites}.bind(this))},openModal:function(e){this.$refs.modalFavoriteForm.openModal(e)},formSubmitted:function(){this.refresh(),this.currentFavorite=null,this.$refs.modalFavoriteForm.closeModal()},contextMenuClickHandler:function(e,t,i){switch(e){case"FavoriteEdit":this.openModal();break;case"FavoriteDelete":if(!confirm(bcI18n.commonConfirmDeleteMessage))return!1;var n=this.currentFavorite.id,o=this;$.bcToken.check(function(){$("#Waiting").show(),p.A.post($.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/delete/"+n+".json",{},{headers:{"X-CSRF-Token":$.bcToken.key}}).then(function(e){200===e.status?(o.refresh(),o.currentFavorite=null):alert(bcI18n.alertServerError),$("#Waiting").hide()}.bind(this)).catch(function(e){alert(bcI18n.alertServerError),$("#Waiting").hide()})},{hideLoader:!1})}}}},_=(0,M.A)(B,[["render",function(e,t,i,p,h,b){var m=(0,n.g2)("favorite-form"),k=(0,n.g2)("modal");return(0,n.uX)(),(0,n.CE)("div",r,[(0,n.Lk)("h2",a,[(0,n.Lk)("button",{type:"button",id:"btn-favorite-expand",class:"bca-collapse__btn bca-nav-favorite-title-button","data-bca-collapse":"favorite-collapse","data-bca-target":"#favoriteBody","aria-expanded":e.ariaExpanded,"aria-controls":"favoriteBody",onClick:t[0]||(t[0]=function(){return b.changeOpenFavorite&&b.changeOpenFavorite.apply(b,arguments)})},[(0,n.eW)((0,o.toDisplayString)(e.i18nFavorite)+" ",1),t[3]||(t[3]=(0,n.Lk)("i",{class:"bca-icon--chevron-down bca-nav-favorite-title-icon"},null,-1))],8,l)]),e.favorites.length?((0,n.uX)(),(0,n.CE)("ul",{key:0,style:(0,o.normalizeStyle)("display:"+e.favoriteBoxOpened),class:"favorite-menu-list bca-nav-favorite-list bca-collapse",id:"favoriteBody"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.favorites,function(t,i){return(0,n.uX)(),(0,n.CE)("li",{key:i,id:"FavoriteRow"+t.id,"data-id":t.id,class:"bca-nav-favorite-list-item",onMousedown:function(e){return b.changeSelected(t)}},[(0,n.Lk)("a",{href:e.baseUrl+t.url,title:t.url},[(0,n.Lk)("span",c,(0,o.toDisplayString)(t.name),1)],8,d)],40,s)}),128))],4)):((0,n.uX)(),(0,n.CE)("ul",{key:1,style:(0,o.normalizeStyle)("display:"+e.favoriteBoxOpened),class:"favorite-menu-list bca-nav-favorite-list bca-collapse",id:"favoriteBody"},[(0,n.Lk)("li",u,[(0,n.Lk)("small",null,(0,o.toDisplayString)(e.i18nNoData),1)])],4)),(0,n.Lk)("div",f,[(0,n.bF)(k,{ref:"modalFavoriteForm",scrollable:!1,hidden:""},{footer:(0,n.k6)(function(){return[(0,n.Lk)("button",{class:"bca-btn",type:"button",onClick:t[1]||(t[1]=function(t){return e.$refs.modalFavoriteForm.closeModal()})},(0,o.toDisplayString)(e.buttonCancel),1),t[4]||(t[4]=(0,n.eW)("Â  ",-1)),(0,n.Lk)("button",{class:"bca-btn",type:"button",onClick:t[2]||(t[2]=function(t){return e.$refs.FavoriteForm.formSubmit()}),disabled:e.formError},(0,o.toDisplayString)(e.buttonSubmit),9,v)]}),default:(0,n.k6)(function(){return[(0,n.bF)(m,{ref:"FavoriteForm","user-id":i.userId,"current-page-url":i.currentPageUrl,"current-page-name":i.currentPageName,"current-favorite":e.currentFavorite,onFormUpdated:b.formUpdated,onFormSubmitted:b.formSubmitted},null,8,["user-id","current-page-url","current-page-name","current-favorite","onFormUpdated","onFormSubmitted"])]}),_:1},512)])])}]]);
/**
 * baserCMS :  Based Website Development Project <https://basercms.net>
 * Copyright (c) baserCMS User Community <https://basercms.net/community/>
 *
 * @copyright     Copyright (c) baserCMS User Community
 * @link          https://basercms.net baserCMS Project
 * @since         5.0.0
 * @license       http://basercms.net/license/index.html MIT License
 */
var D=i(2130).createApp;({app:null,mounted:function(){this.initView(),this.registerEvents()},initView:function(){$("body").append($("#FavoritesMenu")),this.app=D({components:{FavoriteIndex:_}}),window.favoriteApp=this.app.mount("#FavoriteMenu"),$("#BtnFavoriteHelp").bt({trigger:"click",positions:"top",shadow:!0,shadowOffsetX:3,shadowOffsetY:3,shadowBlur:8,shadowColor:"rgba(0,0,0,.8)",shadowOverlap:!1,noShadowOpts:{strokeStyle:"#999",strokeWidth:3},width:"360px",spikeLength:12,spikeGirth:18,padding:15,cornerRadius:0,strokeWidth:6,strokeStyle:"#690",fill:"rgba(255, 255, 255, 1.00)",cssStyles:{fontSize:"12px"},showTip:function(e){$(e).fadeIn(200)},hideTip:function(e,t){$(e).animate({opacity:0},100,t)},contentSelector:"$(this).next('.helptext').html()"}),this.initFavoriteList(),$("#FavoriteAjaxForm").validate()},registerEvents:function(){$("#BtnFavoriteAdd").click(function(){window.favoriteApp&&window.favoriteApp.$refs&&window.favoriteApp.$refs.favoriteIndex&&window.favoriteApp.$refs.favoriteIndex.openModal()}),$("#FavoriteAjaxForm").submit(function(){return!1})},favoriteSortStartHandler:function(e,t){$("ul.favorite-menu-list .placeholder").css("height",t.item.height()),t.item.startIndex=t.item.index()},favoriteSortUpdateHandler:function(e,t){var i=$(".favorite-menu-list"),n=t.item.index()-t.item.startIndex,o=t.item.attr("data-id");$.bcToken.check(function(){var e={id:o,offset:n,_csrfToken:$.bcToken.key};return $.ajax({url:$.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/change_sort.json",type:"POST",data:e,dataType:"text",beforeSend:function(){$("#Waiting").show()},success:function(e){i.find("li").each(function(e){$(this).attr("id","FavoriteRow"+e)})},error:function(){i.sortable("cancel"),alert(bcI18n.favoriteAlertMessage1)},complete:function(){$("#Waiting").hide()}})},{hideLoader:!1})},initFavoriteList:function(){var e=$(".favorite-menu-list"),t=$(".favorite-menu-list li");t.unbind();try{e.sortable("destroy")}catch(e){}e.sortable({scroll:!0,opacity:.8,zIndex:55,containment:"body",tolerance:"pointer",distance:5,cursor:"pointer",placeholder:"ui-widget-content placeholder",revert:100,start:this.favoriteSortStartHandler,update:this.favoriteSortUpdateHandler});var i=1;t.each(function(){$(this).attr("class").match(/no-data/)||null!=$(this).find("a").html()?($(this).attr("id","FavoriteRow"+i),i++):$(this).remove()})}}).mounted()}},i={};function n(e){var o=i[e];if(void 0!==o)return o.exports;var r=i[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,i,o,r)=>{if(!i){var a=1/0;for(c=0;c<e.length;c++){for(var[i,o,r]=e[c],l=!0,s=0;s<i.length;s++)(!1&r||a>=r)&&Object.keys(n.O).every(e=>n.O[e](i[s]))?i.splice(s--,1):(l=!1,r<a&&(a=r));if(l){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[i,o,r]},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=9269,(()=>{var e={9269:0};n.O.j=t=>0===e[t];var t=(t,i)=>{var o,r,[a,l,s]=i,d=0;if(a.some(t=>0!==e[t])){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(s)var c=s(n)}for(t&&t(i);d<a.length;d++)r=a[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},i=self.webpackChunkbc_admin_third=self.webpackChunkbc_admin_third||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var o=n.O(void 0,[6467],()=>n(9525));o=n.O(o)})();
//# sourceMappingURL=main.bundle.js.map