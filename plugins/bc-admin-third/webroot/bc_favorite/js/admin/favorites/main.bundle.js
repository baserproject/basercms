(()=>{"use strict";var e,t={72:(e,t,i)=>{var a=i(1608),r=i.n(a),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"FavoriteListWrap"}},[i("h2",{staticClass:"bca-nav-favorite-title"},[i("button",{staticClass:"bca-collapse__btn bca-nav-favorite-title-button",attrs:{type:"button",id:"btn-favorite-expand","data-bca-collapse":"favorite-collapse","data-bca-target":"#favoriteBody","aria-expanded":e.ariaExpanded,"aria-controls":"favoriteBody"},on:{click:e.changeOpenFavorite}},[e._v("\n                "+e._s(e.i18nFavorite)+"\n                "),i("i",{staticClass:"bca-icon--chevron-down bca-nav-favorite-title-icon"})])]),e._v(" "),e.favorites.length?i("ul",{staticClass:"favorite-menu-list bca-nav-favorite-list bca-collapse",style:"display:"+e.favoriteBoxOpened,attrs:{id:"favoriteBody"}},e._l(e.favorites,(function(t,a){return i("li",{key:a,staticClass:"bca-nav-favorite-list-item",attrs:{id:"FavoriteRow"+t.id,"data-id":t.id},on:{mousedown:function(i){return e.changeSelected(t)}}},[i("a",{attrs:{href:e.baseUrl+t.url,title:t.url}},[i("span",{staticClass:"bca-nav-favorite-list-item-label"},[e._v(e._s(t.name))])])])})),0):i("ul",{staticClass:"favorite-menu-list bca-nav-favorite-list bca-collapse",style:"display:"+e.favoriteBoxOpened,attrs:{id:"favoriteBody"}},[i("li",{staticClass:"no-data"},[i("small",[e._v(e._s(e.i18nNoData))])])]),e._v(" "),i("div",{staticClass:"ui-widget",attrs:{id:"FavoriteDialog"}},[i("modal",{ref:"modalFavoriteForm",attrs:{scrollable:!1,hidden:""}},[i("favorite-form",{ref:"FavoriteForm",attrs:{"user-id":e.userId,"current-page-url":e.currentPageUrl,"current-page-name":e.currentPageName,"current-favorite":e.currentFavorite},on:{formUpdated:e.formUpdated,formSubmitted:e.formSubmitted}}),e._v(" "),i("template",{slot:"footer"},[i("button",{staticClass:"bca-btn",attrs:{type:"button"},on:{click:function(t){return e.$refs.modalFavoriteForm.closeModal()}}},[e._v(e._s(e.buttonCancel))]),e._v("Â \n                    "),i("button",{staticClass:"bca-btn",attrs:{type:"button",disabled:e.formError},on:{click:function(t){return e.$refs.FavoriteForm.formSubmit()}}},[e._v("\n                        "+e._s(e.buttonSubmit)+"\n                    ")])])],2)],1)])};o._withStripped=!0;var n=i(8071),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{attrs:{method:"POST",id:"FavoriteAjaxForm"}},[i("h2",{staticClass:"bca-main__header-title"},[e._v(e._s(e.windowTitle))]),e._v(" "),i("input",{attrs:{type:"hidden",name:"id"},domProps:{value:e.id}}),e._v(" "),i("input",{attrs:{type:"hidden",name:"user_id"},domProps:{value:e.userId}}),e._v(" "),i("input",{attrs:{type:"hidden",name:"_csrfToken"}}),e._v(" "),i("dl",[i("dt",[i("label",{attrs:{for:"FavoriteName"}},[e._v(e._s(e.labelTitle))])]),e._v(" "),i("dd",[i("span",{staticClass:"bca-textbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"required",attrs:{type:"text",id:"FavoriteName",placeholder:e.labelTitle,size:"30",name:"name",autofocus:""},domProps:{value:e.name},on:{input:[function(t){t.target.composing||(e.name=t.target.value)},e.formUpdated]}})]),i("br"),e._v(" "),e.$v.name.$invalid?i("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.alertRequire))]):e._e()]),e._v(" "),i("dt",[i("label",{attrs:{for:"FavoriteUrl"}}),e._v(e._s(e.labelUrl))]),e._v(" "),i("dd",[i("span",{staticClass:"bca-textbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"required",attrs:{type:"text",id:"FavoriteUrl",placeholder:e.labelUrl,size:"30",name:"url"},domProps:{value:e.url},on:{input:[function(t){t.target.composing||(e.url=t.target.value)},e.formUpdated]}})]),i("br"),e._v(" "),e.$v.url.$invalid?i("div",{staticClass:"invalid-feedback"},[e._v(e._s(e.alertRequire))]):e._e()])])])};s._withStripped=!0;var l=i(9285),d=(l.validationMixin,l.default,i(8836).required);const c={name:"FavoriteForm",data:function(){return{alertRequire:bcI18n.alertRequire,windowTitle:null,addTitle:bcI18n.addTitle,editTitle:bcI18n.editTitle,labelTitle:bcI18n.labelTitle,labelUrl:bcI18n.labelUrl,name:"",url:"",id:""}},validations:{name:{required:d},url:{required:d}},props:["userId","currentPageName","currentPageUrl","currentFavorite"],mounted:function(){this.currentFavorite?(this.id=this.currentFavorite.id,this.name=this.currentFavorite.name,this.url=this.currentFavorite.url,this.windowTitle=this.editTitle):(this.name=this.currentPageName,this.url=this.currentPageUrl,this.windowTitle=this.addTitle)},methods:{formUpdated:function(){this.$emit("formUpdated",this.$v.$invalid)},formSubmit:function(){var e;e=this.id?$.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/edit/"+this.id+".json":$.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/add.json";var t=this.userId,i=this.name,a=this.url,r=this;$.bcToken.check((function(){n.Z.post(e,{user_id:t,name:i,url:a,_csrfToken:$.bcToken.key},{headers:{Authorization:$.bcJwt.accessToken}}).then(function(e){e.data&&($("#Waiting").hide(),$.bcToken.key=null,r.$emit("formSubmitted"))}.bind(this)).catch((function(e){if(e.response){var t=e.response.data.message+"\n",i=e.response.data.errors;Object.keys(i).forEach((function(e){Object.keys(i[e]).forEach((function(a){t=t+"\n"+i[e][a]}))})),alert(t)}else console.log("Error",e.message);$("#Waiting").hide(),$.bcToken.key=null,r.$emit("formSubmitted")}))}),{useUpdate:!1,hideLoader:!1})}}};var u=i(3744);const v=(0,u.Z)(c,[["render",s]]);var f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.showModal?i("transition",{attrs:{name:"modal",appear:""}},[i("div",{staticClass:"modal modal-overlay",on:{click:function(t){return t.target!==t.currentTarget?null:e.closeModal.apply(null,arguments)}}},[i("div",{staticClass:"modal-window"},[i("div",{staticClass:"modal-content"},[e._t("default")],2),e._v(" "),i("footer",{staticClass:"modal-footer"},[e._t("footer",(function(){return[i("button",{attrs:{type:"button"},on:{click:e.closeModal}},[e._v("Close")])]}))],2)])])]):e._e()};f._withStripped=!0;const h={props:{scrollable:Boolean},data:function(){return{showModal:!1}},methods:{openModal:function(e){this.showModal=!0,this.$nextTick((function(){this.scrollable?($(".modal-overlay").css("align-items","normal"),$(".modal-window").css("overflow","scroll").css("display","grid")):($(".modal-overlay").css("align-items","center"),$(".modal-window").css("overflow","hidden")),this.$emit("modal-opened",e)}))},closeModal:function(){this.$emit("modal-closed"),this.showModal=!1}}},m={data:function(){return{favoriteBoxOpened:"none",buttonSubmit:bcI18n.buttonSubmit,buttonCancel:bcI18n.buttonCancel,i18nFavorite:bcI18n.i18nFavorite,i18nNoData:bcI18n.i18nNoData,i18nEdit:bcI18n.i18nEdit,i18nDelete:bcI18n.i18nDelete,favorites:[],ariaExpanded:"true",baseUrl:$.bcUtil.baseUrl,formError:!1,favorite:{},currentFavorite:null}},props:["userId","currentPageName","currentPageUrl"],components:{FavoriteForm:v,Modal:(0,u.Z)(h,[["render",f]])},mounted:function(){this.initFavorite()},methods:{formUpdated:function(e){this.formError=e},initFavorite:function(){this.refresh();var e=$.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/get_favorite_box_opened.json";n.Z.get(e,{headers:{Authorization:$.bcJwt.accessToken}}).then(function(e){"1"===e.data.result?(this.favoriteBoxOpened="block",this.ariaExpanded="false"):(this.favoriteBoxOpened="none",this.ariaExpanded="true")}.bind(this)),$.contextMenu({selector:".favorite-menu-list li",items:{FavoriteEdit:{name:bcI18n.i18nEdit,icon:"edit"},FavoriteDelete:{name:bcI18n.i18nDelete,icon:"delete"}},callback:this.contextMenuClickHandler})},changeSelected:function(e){this.currentFavorite=e},changeOpenFavorite:function(){var e=$.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/save_favorite_box";"block"===this.favoriteBoxOpened?(this.favoriteBoxOpened="none",this.ariaExpanded="true",$.bcToken.check((function(){n.Z.post(e+".json",{},{headers:{"X-CSRF-Token":$.bcToken.key}})}),{loaderType:"none"})):(this.favoriteBoxOpened="block",this.ariaExpanded="false",$.bcToken.check((function(){n.Z.post(e+"/1.json",{},{headers:{"X-CSRF-Token":$.bcToken.key}})}),{loaderType:"none"}))},refresh:function(){var e=$.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/index.json";n.Z.get(e,{headers:{Authorization:$.bcJwt.accessToken}}).then(function(e){this.favorites=e.data.favorites}.bind(this))},openModal:function(e){this.$refs.modalFavoriteForm.openModal(e)},formSubmitted:function(){this.refresh(),this.$refs.modalFavoriteForm.closeModal()},contextMenuClickHandler:function(e,t,i){switch(e){case"FavoriteEdit":this.openModal();break;case"FavoriteDelete":if(!confirm(bcI18n.commonConfirmDeleteMessage))return!1;var a=this.currentFavorite.id;$.bcToken.check((function(){$("#Waiting").show(),n.Z.post($.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/delete/"+a+".json",{},{headers:{"X-CSRF-Token":$.bcToken.key}}).then(function(e){200===e.status?$("#FavoriteRow"+a).fadeOut(300,(function(){$(this).remove()})):alert(bcI18n.alertServerError),$("#Waiting").hide()}.bind(this)).catch((function(e){alert(bcI18n.alertServerError),$("#Waiting").hide()}))}),{hideLoader:!1})}}}},b=(0,u.Z)(m,[["render",o]]);var p=i(9285);({mounted:function(){this.initView(),this.registerEvents()},initView:function(){$("body").append($("#FavoritesMenu")),r().use(p.default),new(r())({el:"#FavoriteMenu",components:{FavoriteIndex:b}}),$("#BtnFavoriteHelp").bt({trigger:"click",positions:"top",shadow:!0,shadowOffsetX:3,shadowOffsetY:3,shadowBlur:8,shadowColor:"rgba(0,0,0,.8)",shadowOverlap:!1,noShadowOpts:{strokeStyle:"#999",strokeWidth:3},width:"360px",spikeLength:12,spikeGirth:18,padding:15,cornerRadius:0,strokeWidth:6,strokeStyle:"#690",fill:"rgba(255, 255, 255, 1.00)",cssStyles:{fontSize:"12px"},showTip:function(e){$(e).fadeIn(200)},hideTip:function(e,t){$(e).animate({opacity:0},100,t)},contentSelector:"$(this).next('.helptext').html()"}),this.initFavoriteList(),$("#FavoriteAjaxForm").validate()},registerEvents:function(){$("#BtnFavoriteAdd").click((function(){document.querySelector("#FavoriteListWrap").__vue__.openModal()})),$("#FavoriteAjaxForm").submit((function(){return!1}))},favoriteSortStartHandler:function(e,t){$("ul.favorite-menu-list .placeholder").css("height",t.item.height()),t.item.startIndex=t.item.index()},favoriteSortUpdateHandler:function(e,t){var i=$(".favorite-menu-list"),a=t.item.index()-t.item.startIndex,r=t.item.attr("data-id");$.bcToken.check((function(){var e={id:r,offset:a,_csrfToken:$.bcToken.key};return $.ajax({url:$.bcUtil.apiAdminBaseUrl+"bc-favorite/favorites/change_sort.json",headers:{Authorization:$.bcJwt.accessToken},type:"POST",data:e,dataType:"text",beforeSend:function(){$("#Waiting").show()},success:function(e){i.find("li").each((function(e){$(this).attr("id","FavoriteRow"+e)}))},error:function(){i.sortable("cancel"),alert(bcI18n.favoriteAlertMessage1)},complete:function(){$("#Waiting").hide()}})}),{hideLoader:!1})},initFavoriteList:function(){var e=$(".favorite-menu-list"),t=$(".favorite-menu-list li");t.unbind();try{e.sortable("destroy")}catch(e){}e.sortable({scroll:!0,opacity:.8,zIndex:55,containment:"body",tolerance:"pointer",distance:5,cursor:"pointer",placeholder:"ui-widget-content placeholder",revert:100,start:this.favoriteSortStartHandler,update:this.favoriteSortUpdateHandler});var i=1;t.each((function(){$(this).attr("class").match(/no-data/)||null!=$(this).find("a").html()?($(this).attr("id","FavoriteRow"+i),i++):$(this).remove()}))}}).mounted()}},i={};function a(e){var r=i[e];if(void 0!==r)return r.exports;var o=i[e]={exports:{}};return t[e].call(o.exports,o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,i,r,o)=>{if(!i){var n=1/0;for(c=0;c<e.length;c++){for(var[i,r,o]=e[c],s=!0,l=0;l<i.length;l++)(!1&o||n>=o)&&Object.keys(a.O).every((e=>a.O[e](i[l])))?i.splice(l--,1):(s=!1,o<n&&(n=o));if(s){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,r,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=7689,(()=>{var e={7689:0};a.O.j=t=>0===e[t];var t=(t,i)=>{var r,o,[n,s,l]=i,d=0;if(n.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var c=l(a)}for(t&&t(i);d<n.length;d++)o=n[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},i=self.webpackChunkbc_admin_third=self.webpackChunkbc_admin_third||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var r=a.O(void 0,[5e3],(()=>a(72)));r=a.O(r)})();
//# sourceMappingURL=main.bundle.js.map