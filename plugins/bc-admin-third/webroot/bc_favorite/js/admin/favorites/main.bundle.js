(()=>{"use strict";var e,t={2235:(e,t,a)=>{var i=a(1608),r=a.n(i),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"FavoriteListWrap"}},[a("h2",{staticClass:"bca-nav-favorite-title"},[a("button",{staticClass:"bca-collapse__btn bca-nav-favorite-title-button",attrs:{type:"button",id:"btn-favorite-expand","data-bca-collapse":"favorite-collapse","data-bca-target":"#favoriteBody","aria-expanded":e.ariaExpanded,"aria-controls":"favoriteBody"},on:{click:e.changeOpenFavorite}},[e._v("\n                "+e._s(e.i18Favorite)+" "),a("i",{staticClass:"bca-icon--chevron-down bca-nav-favorite-title-icon"})])]),e._v(" "),e.favorites.length?a("ul",{staticClass:"favorite-menu-list bca-nav-favorite-list bca-collapse",style:"display:"+e.favoriteBoxOpened,attrs:{id:"favoriteBody"}},e._l(e.favorites,(function(t,i){return a("li",{key:i,staticClass:"bca-nav-favorite-list-item",attrs:{id:"FavoriteRow"+t.id,"data-id":t.id},on:{mousedown:function(a){return e.changeSelected(t)}}},[a("a",{attrs:{href:e.baseUrl+t.url,title:t.url}},[a("span",{staticClass:"bca-nav-favorite-list-item-label"},[e._v(e._s(t.name))])])])})),0):a("ul",{staticClass:"favorite-menu-list bca-nav-favorite-list bca-collapse",style:"display:"+e.favoriteBoxOpened,attrs:{id:"favoriteBody"}},[a("li",{staticClass:"no-data"},[a("small",[e._v(e._s(e.i18NoData))])])]),e._v(" "),a("div",{staticClass:"ui-widget",attrs:{id:"FavoriteDialog",title:"お気に入り登録"}},[a("modal",{ref:"modalFavoriteForm",attrs:{scrollable:!1,hidden:""}},[a("favorite-form",{ref:"FavoriteForm",attrs:{"user-id":e.userId,"current-page-url":e.currentPageUrl,"current-page-name":e.currentPageName,"current-favorite":e.currentFavorite},on:{formUpdated:e.formUpdated,formSubmitted:e.formSubmitted}}),e._v(" "),a("template",{slot:"footer"},[a("button",{staticClass:"bca-btn",attrs:{type:"button"},on:{click:function(t){return e.$refs.modalFavoriteForm.closeModal()}}},[e._v("キャンセル")]),e._v(" \n                    "),a("button",{staticClass:"bca-btn",attrs:{type:"button",disabled:e.formError},on:{click:function(t){return e.$refs.FavoriteForm.formSubmit()}}},[e._v("\n                        確定\n                    ")])])],2)],1),e._v(" "),a("ul",{staticClass:"context-menu",staticStyle:{display:"none"},attrs:{id:"FavoritesMenu"}},[a("li",{staticClass:"edit"},[a("a",{attrs:{href:"#FavoriteEdit"}},[e._v(e._s(e.i18Edit))])]),e._v(" "),a("li",{staticClass:"delete"},[a("a",{attrs:{href:"#FavoriteDelete"}},[e._v(e._s(e.i18Delete))])])])])};o._withStripped=!0;var n=a(8071),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{attrs:{method:"POST",id:"FavoriteAjaxForm"}},[a("input",{attrs:{type:"hidden",name:"id"},domProps:{value:e.id}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"user_id"},domProps:{value:e.userId}}),e._v(" "),a("input",{attrs:{type:"hidden",name:"_csrfToken"}}),e._v(" "),a("dl",[a("dt",[a("label",{attrs:{for:"favorite-name"}},[e._v(e._s(e.i18Title))])]),e._v(" "),a("dd",[a("span",{staticClass:"bca-textbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"required",attrs:{type:"text",id:"FavoriteName",placeholder:"タイトル",size:"30",name:"name"},domProps:{value:e.name},on:{input:[function(t){t.target.composing||(e.name=t.target.value)},e.formUpdated]}})]),e._v(" "),e.$v.name.$invalid?a("div",{staticClass:"invalid-feedback",staticStyle:{color:"red"}},[e._v("必須です")]):e._e()]),e._v(" "),a("dt",[a("label",{attrs:{for:"favorite-url"}}),e._v(e._s(e.i18Url))]),e._v(" "),a("dd",[a("span",{staticClass:"bca-textbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],staticClass:"required",attrs:{type:"text",id:"FavoriteUrl",placeholder:"URL",size:"30",name:"url"},domProps:{value:e.url},on:{input:[function(t){t.target.composing||(e.url=t.target.value)},e.formUpdated]}})]),e._v(" "),e.$v.url.$invalid?a("div",{staticClass:"invalid-feedback",staticStyle:{color:"red"}},[e._v("必須です")]):e._e()])])])};s._withStripped=!0;var l=a(9285),d=(l.validationMixin,l.default,a(8836).required);const c={name:"FavoriteForm",data:function(){return{i18Title:"title",i18Url:"url",name:"",url:"",id:""}},validations:{name:{required:d},url:{required:d}},props:["userId","currentPageName","currentPageUrl","currentFavorite"],mounted:function(){this.currentFavorite?(this.id=this.currentFavorite.id,this.name=this.currentFavorite.name,this.url=this.currentFavorite.url):(this.name=this.currentPageName,this.url=this.currentPageUrl)},methods:{formUpdated:function(){this.$emit("formUpdated",this.$v.$invalid)},formSubmit:function(){var e;e=this.id?$.bcUtil.apiBaseUrl+"bc-favorite/favorites/edit/"+this.id+".json":$.bcUtil.apiBaseUrl+"bc-favorite/favorites/add.json";var t=this.userId,a=this.name,i=this.url,r=this;$.bcToken.check((function(){$('#FavoriteAjaxForm input[name="_csrfToken"]').val($.bcToken.key),n.Z.post(e,{user_id:t,name:a,url:i},{headers:{Authorization:$.bcJwt.accessToken}}).then(function(e){e.data&&($("#Waiting").hide(),$.bcToken.key=null,r.$emit("formSubmitted"))}.bind(this)).catch((function(e){if(e.response){var t=e.response.data.message+"\n",a=e.response.data.errors;Object.keys(a).forEach((function(e){Object.keys(a[e]).forEach((function(i){t=t+"\n"+a[e][i]}))})),alert(t)}else console.log("Error",e.message);$("#Waiting").hide(),$.bcToken.key=null,r.$emit("formSubmitted")}))}),{useUpdate:!1,hideLoader:!1})}}};var u=a(3744);const v=(0,u.Z)(c,[["render",s]]);var f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showModal?a("transition",{attrs:{name:"modal",appear:""}},[a("div",{staticClass:"modal modal-overlay",on:{click:function(t){return t.target!==t.currentTarget?null:e.closeModal.apply(null,arguments)}}},[a("div",{staticClass:"modal-window"},[a("div",{staticClass:"modal-content"},[e._t("default")],2),e._v(" "),a("footer",{staticClass:"modal-footer"},[e._t("footer",(function(){return[a("button",{attrs:{type:"button"},on:{click:e.closeModal}},[e._v("Close")])]}))],2)])])]):e._e()};f._withStripped=!0;const m={props:{scrollable:Boolean},data:function(){return{showModal:!1}},methods:{openModal:function(e){this.showModal=!0,this.$nextTick((function(){this.scrollable?($(".modal-overlay").css("align-items","normal"),$(".modal-window").css("overflow","scroll").css("display","grid")):($(".modal-overlay").css("align-items","center"),$(".modal-window").css("overflow","hidden")),this.$emit("modal-opened",e)}))},closeModal:function(){this.$emit("modal-closed"),this.showModal=!1}}},h={data:function(){return{favoriteBoxOpened:"none",i18Favorite:"お気に入り",i18NoData:"nodata",i18Title:"title",i18Url:"url",i18Edit:"edit",i18Delete:"delete",favorites:[],registerUrl:$.bcUtil.apiBaseUrl+"bc-favorite/favorites/add.json",ariaExpanded:"true",baseUrl:$.bcUtil.baseUrl,formError:!1,favorite:{},currentFavorite:null}},props:["userId","currentPageName","currentPageUrl"],components:{FavoriteForm:v,Modal:(0,u.Z)(m,[["render",f]])},mounted:function(){this.initFavorite()},methods:{formUpdated:function(e){this.formError=e},initFavorite:function(){this.refresh();var e=$.bcUtil.apiBaseUrl+"bc-favorite/favorites/get_favorite_box_opened.json";n.Z.get(e,{headers:{Authorization:$.bcJwt.accessToken}}).then(function(e){"1"===e.data.result?(this.favoriteBoxOpened="block",this.ariaExpanded="false"):(this.favoriteBoxOpened="none",this.ariaExpanded="true")}.bind(this)),$.contextMenu({selector:".favorite-menu-list li",items:{FavoriteEdit:{name:"編集",icon:"edit"},FavoriteDelete:{name:"削除",icon:"delete"}},callback:this.contextMenuClickHandler})},changeSelected:function(e){this.currentFavorite=e},changeOpenFavorite:function(){if("block"==this.favoriteBoxOpened){this.favoriteBoxOpened="none",this.ariaExpanded="true";var e=$.bcUtil.apiBaseUrl+"bc-favorite/favorites/save_favorite_box.json";n.Z.post(e,{},{headers:{Authorization:$.bcJwt.accessToken}})}else{this.favoriteBoxOpened="block",this.ariaExpanded="false";e=$.bcUtil.apiBaseUrl+"bc-favorite/favorites/save_favorite_box/1.json";n.Z.post(e,{},{headers:{Authorization:$.bcJwt.accessToken}})}},refresh:function(){var e=$.bcUtil.apiBaseUrl+"bc-favorite/favorites/index.json";n.Z.get(e,{headers:{Authorization:$.bcJwt.accessToken}}).then(function(e){this.favorites=e.data.favorites}.bind(this))},openModal:function(e){this.$refs.modalFavoriteForm.openModal(e)},formSubmitted:function(){this.refresh(),this.$refs.modalFavoriteForm.closeModal()},contextMenuClickHandler:function(e,t,a){switch(e){case"FavoriteEdit":this.openModal();break;case"FavoriteDelete":if(!confirm(bcI18n.commonConfirmDeleteMessage))return!1;var i=this.currentFavorite.id;$.bcToken.check((function(){$("#Waiting").show(),n.Z.post($.bcUtil.apiBaseUrl+"bc-favorite/favorites/delete/"+i+".json",{},{headers:{Authorization:$.bcJwt.accessToken}}).then(function(e){200===e.status?$("#FavoriteRow"+i).fadeOut(300,(function(){$(this).remove()})):alert("サーバーでの処理に失敗しました。"),$("#Waiting").hide()}.bind(this)).catch((function(e){alert("サーバーでの処理に失敗しました。"),$("#Waiting").hide()}))}),{hideLoader:!1})}}}},p=(0,u.Z)(h,[["render",o]]);var b=a(9285);
/**
 * baserCMS :  Based Website Development Project <https://basercms.net>
 * Copyright (c) baserCMS User Community <https://basercms.net/community/>
 *
 * @copyright     Copyright (c) baserCMS User Community
 * @link          https://basercms.net baserCMS Project
 * @since         5.0.0
 * @license       http://basercms.net/license/index.html MIT License
 */
r().use(b.default),$((function(){new(r())({el:"#FavoriteMenu",components:{FavoriteIndex:p}})}))}},a={};function i(e){var r=a[e];if(void 0!==r)return r.exports;var o=a[e]={exports:{}};return t[e].call(o.exports,o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,a,r,o)=>{if(!a){var n=1/0;for(c=0;c<e.length;c++){for(var[a,r,o]=e[c],s=!0,l=0;l<a.length;l++)(!1&o||n>=o)&&Object.keys(i.O).every((e=>i.O[e](a[l])))?a.splice(l--,1):(s=!1,o<n&&(n=o));if(s){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[a,r,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.j=7689,(()=>{var e={7689:0};i.O.j=t=>0===e[t];var t=(t,a)=>{var r,o,[n,s,l]=a,d=0;if(n.some((t=>0!==e[t]))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(l)var c=l(i)}for(t&&t(a);d<n.length;d++)o=n[d],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(c)},a=self.webpackChunkbc_admin_third=self.webpackChunkbc_admin_third||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var r=i.O(void 0,[5e3],(()=>i(2235)));r=i.O(r)})();
//# sourceMappingURL=main.bundle.js.map