{"version":3,"file":"admin/sites/form.bundle.js","mappings":";;;;;;;;;AAcAA,GAAE,WACE,IAAIC,EAAQD,EAAE,UAAUE,MAyBxB,SAASC,IACL,IAAIC,EAAYJ,EAAE,OAAOE,MACrBG,EAAaL,EAAE,iBAAiBE,WAClBI,IAAfD,IACCA,EAAa,GAEjB,IAAIE,EAAMP,EAAEQ,OAAOC,WAAa,oDAAsDJ,OACrEC,IAAdF,IACCG,GAAO,IAAMH,GAEjBG,GAAO,QACPP,EAAEQ,OAAOE,KAAKH,GAAK,SAAUI,GACzB,IAAIC,EAAeZ,EAAE,WACjBa,EAAab,EAAE,SACfc,EAASF,EAAaV,MACtBa,EAAOF,EAAWX,MACtBU,EAAaI,KAAK,UAAUC,SAC5BJ,EAAWG,KAAK,UAAUC,SAC1BN,EAASX,EAAEkB,UAAUP,GACrBX,EAAEmB,KAAKR,EAAOS,SAAS,SAAUC,EAAOC,GACpCV,EAAaW,OAAOvB,EAAE,YAAYE,IAAImB,GAAOG,KAAKF,GAAMG,KAAK,WAAaJ,IAAUP,GACvF,IACDd,EAAEmB,KAAKR,EAAOe,OAAO,SAAUL,EAAOC,GAClCT,EAAWU,OAAOvB,EAAE,YAAYE,IAAImB,GAAOG,KAAKF,GAAMG,KAAK,WAAaJ,IAAUN,GACrF,IACDY,GACH,GAAE,CAACC,KAAM,MAAOC,WAAY,QAASC,eAAgB,iBACzD,CAKD,SAASH,IACL,IAAII,EAAe/B,EAAE,kBACjBgC,EAAchC,EAAE,kBAChBiC,EAAWjC,EAAE,cACbkC,EAAmBlC,EAAE,yBACrBmC,EAAenC,EAAE,qBACjBA,EAAE,WAAWE,OAASF,EAAE,SAASE,MACjCF,EAAE,sBAAsBoC,QAExBpC,EAAE,sBAAsBqC,OACxBN,EAAaN,KAAK,WAAW,GAC7BO,EAAYP,KAAK,WAAW,GAC5BQ,EAASR,KAAK,WAAW,IAEzBO,EAAYP,KAAK,YACjBM,EAAaN,KAAK,WAAW,GAC7BS,EAAiBG,OACjBJ,EAASR,KAAK,WAAW,GACzBU,EAAaE,SAEbH,EAAiBE,OACS,UAAtBpC,EAAE,WAAWE,OAA2C,cAAtBF,EAAE,WAAWE,MAC/CiC,EAAaC,OAEbD,EAAaE,OAGxB,CAnFDrC,EAAE,YAAYsC,OAAM,WAChB,GAAIrC,GAASA,GAASD,EAAE,UAAUE,MAS9B,OARAF,EAAEuC,UAAUH,KAAK,CACb,MAASI,OAAOC,cAChB,QAAWD,OAAOE,gBAClB,GAAM,WACF1C,EAAEQ,OAAOmC,aACT3C,EAAE,YAAY4C,QAAQ,QAAQC,QACjC,KAEE,EAEX7C,EAAEQ,OAAOmC,YACZ,IAED3C,EAAE,iBAAiB8C,OAAO3C,GAC1BH,EAAE,kBAAkB8C,OAAOnB,GAC3B3B,EAAE,+BAA+BsC,MAAMX,GAEvCxB,GAkEH","sources":["webpack://bc-admin-third/./src/js/admin/sites/form.js"],"sourcesContent":["/**\n * baserCMS :  Based Website Development Project <https://basercms.net>\n * Copyright (c) NPO baser foundation <https://baserfoundation.org/>\n *\n * @copyright     Copyright (c) NPO baser foundation\n * @link          https://basercms.net baserCMS Project\n * @since         5.0.0\n * @license       https://basercms.net/license/index.html MIT License\n */\n\n/**\n * サイト編集\n */\n\n$(function () {\n    var alias = $(\"#alias\").val();\n    $(\"#BtnSave\").click(function () {\n        if (alias && alias != $(\"#alias\").val()) {\n            $.bcConfirm.show({\n                'title': bcI18n.confirmTitle1,\n                'message': bcI18n.confirmMessage2,\n                'ok': function () {\n                    $.bcUtil.showLoader();\n                    $(\"#BtnSave\").parents(\"form\").submit();\n                }\n            });\n            return false;\n        }\n        $.bcUtil.showLoader();\n    });\n\n    $(\"#main-site-id\").change(loadDeviceAndLang);\n    $(\"#device, #lang\").change(loadOptions);\n    $('input[name=\"same_main_url\"]').click(loadOptions);\n\n    loadDeviceAndLang();\n\n    /**\n     * デバイスと言語の表示設定\n     */\n    function loadDeviceAndLang() {\n        var currentId = $(\"#id\").val();\n        var mainSiteId = $(\"#main-site-id\").val();\n        if(mainSiteId === undefined) {\n            mainSiteId = 1;\n        }\n        var url = $.bcUtil.apiBaseUrl + 'baser-core/sites/get_selectable_devices_and_lang/' + mainSiteId;\n        if(currentId !== undefined) {\n            url += '/' + currentId;\n        }\n        url += '.json';\n        $.bcUtil.ajax(url, function (result) {\n            var selectDevice = $(\"#device\");\n            var selectLang = $(\"#lang\");\n            var device = selectDevice.val();\n            var lang = selectLang.val();\n            selectDevice.find('option').remove();\n            selectLang.find('option').remove();\n            result = $.parseJSON(result);\n            $.each(result.devices, function (value, name) {\n                selectDevice.append($('<option>').val(value).text(name).prop('selected', (value === device)));\n            });\n            $.each(result.langs, function (value, name) {\n                selectLang.append($('<option>').val(value).text(name).prop('selected', (value === lang)));\n            });\n            loadOptions();\n        }, {type: 'GET', loaderType: 'after', loaderSelector: '#main-site-id'});\n    }\n\n    /**\n     * デバイスと言語のオプションの表示設定\n     */\n    function loadOptions() {\n        var autoRedirect = $(\"#auto-redirect\");\n        var sameMainUrl = $(\"#same-main-url\");\n        var autoLink = $(\"#auto-link\");\n        var spanAutoRedirect = $(\"#SpanSiteAutoRedirect\");\n        var spanAutoLink = $(\"#SpanSiteAutoLink\");\n        if ($(\"#device\").val() || $(\"#lang\").val()) {\n            $(\"#SectionAccessType\").show();\n        } else {\n            $(\"#SectionAccessType\").hide();\n            autoRedirect.prop('checked', false);\n            sameMainUrl.prop('checked', false);\n            autoLink.prop('checked', false);\n        }\n        if (sameMainUrl.prop('checked')) {\n            autoRedirect.prop('checked', false);\n            spanAutoRedirect.hide();\n            autoLink.prop('checked', false);\n            spanAutoLink.hide();\n        } else {\n            spanAutoRedirect.show();\n            if ($(\"#device\").val() == 'mobile' || $(\"#device\").val() == 'smartphone') {\n                spanAutoLink.show();\n            } else {\n                spanAutoLink.hide();\n            }\n        }\n    }\n\n});\n"],"names":["$","alias","val","loadDeviceAndLang","currentId","mainSiteId","undefined","url","bcUtil","apiBaseUrl","ajax","result","selectDevice","selectLang","device","lang","find","remove","parseJSON","each","devices","value","name","append","text","prop","langs","loadOptions","type","loaderType","loaderSelector","autoRedirect","sameMainUrl","autoLink","spanAutoRedirect","spanAutoLink","show","hide","click","bcConfirm","bcI18n","confirmTitle1","confirmMessage2","showLoader","parents","submit","change"],"sourceRoot":""}