{"version":3,"file":"js/admin/contents/index.bundle.js","mappings":";;;;;;;;;AAcAA,EAAE,YAOE,WAEI,IAAIC,EAAWD,EAAE,gDAAgDE,MAC7DC,EAAOH,EAAE,qBAAqBE,WACjBE,IAAbH,GAAmC,UAATE,IAC1BF,EAAW,KAIf,IA8DII,EA9DAC,EAAyBN,EAAE,2BAC/B,OAAQC,GACJ,IAAK,IA4DLI,EAAaL,EAAE,6BACnBA,EAAEO,OAAOC,KAAK,CACVC,QAASJ,EAAWK,KAAK,gBACzBC,kBAAmBN,EAAWK,KAAK,0BACnCE,YAAaP,EAAWK,KAAK,oBAC7BG,gBAAiBR,EAAWK,KAAK,wBACjCI,oBAAqBT,EAAWK,KAAK,8BAGzCV,EAAEe,QAAQC,KAAK,YAAahB,EAAEO,OAAOU,4BACrCjB,EAAE,gBAAgBkB,MAAM,WACpBlB,EAAEO,OAAOY,OAAOC,UACpB,GACApB,EAAE,iBAAiBkB,MAAM,WACrBlB,EAAEO,OAAOY,OAAOE,YAChBrB,EAAEO,OAAOY,OAAOG,UAAUtB,EAAEO,OAAOY,OAAOI,YAAY,GAAO,EACjE,GAEAvB,EAAE,kBAAkBkB,MAAMlB,EAAEO,OAAOiB,iBAGnCxB,EAAEyB,UAAUC,GAAG,kBAAmB1B,EAAEO,OAAOoB,cAC3C3B,EAAEyB,UAAUC,GAAG,mBAAoB1B,EAAEO,OAAOqB,iBAC5C5B,EAAE6B,OAAOC,qBAAsB,EAC/B9B,EAAEA,EAAEO,QAAQS,KAAK,SAAU,WACvBhB,EAAE6B,OAAOC,qBAAsB,CACnC,GACA9B,EAAEO,OAAOwB,OArFDzB,EAAuB0B,OACvB,MACJ,IAAK,IAEDhC,EAAEiC,QAAQzB,KAAK,CAAC0B,SAAUlC,EAAE6B,OAAOM,gBAATnC,mCAC1BM,EAAuB8B,OAI/BpC,EAAE,oBAAoBkB,MAAM,WAExB,OADAlB,EAAE,cAAcE,IAAI,IACb,CACX,GAGAF,EAAE,wCAAwCqC,OAAO,WAE7C,OADArC,EAAE6B,OAAOS,aACDtC,EAAE,gDAAgDE,OACtD,IAAK,IAiCbqC,SAASC,KAAOxC,EAAE6B,OAAOY,aAATzC,wCA/BJ,MACJ,IAAK,IAqBT0C,EAAM1C,EAAE6B,OAAOY,aAATzC,6BACVA,EAAE,cAAcE,IAAI,GACpBqC,SAASC,KAAOE,EAAMC,UAAU3C,EAAE,qBAAqB4C,aAH3D,IACQF,CAjBJ,EACJ,CA5CAG,EAyGJ","sources":["webpack://bc-admin-third/./src/js/admin/contents/index.js"],"sourcesContent":["/**\n * baserCMS :  Based Website Development Project <https://basercms.net>\n * Copyright (c) NPO baser foundation <https://baserfoundation.org/>\n *\n * @copyright     Copyright (c) NPO baser foundation\n * @link          https://basercms.net baserCMS Project\n * @since         5.0.0\n * @license       https://basercms.net/license/index.html MIT License\n */\n\n/**\n * コンテンツ一覧\n */\n\n$(function () {\n\n    initView();\n\n    /**\n     * 表示初期化\n     */\n    function initView(e) {\n\n        let listType = $(\"input[name='ViewSetting[list_type]']:checked\").val();\n        let mode = $(\"#viewsetting-mode\").val();\n        if (listType === undefined || mode === 'trash') {\n            listType = \"1\";\n        }\n\n        // 一覧\n        let grpChangeTreeOpenClose = $(\"#GrpChangeTreeOpenClose\");\n        switch (listType) {\n            case \"1\":\n                initTree()\n                grpChangeTreeOpenClose.show();\n                break;\n            case \"2\":\n                // 一括処理\n                $.bcBatch.init({batchUrl: $.bcUtil.apiAdminBaseUrl + 'baser-core' + '/contents/batch.json'});\n                grpChangeTreeOpenClose.hide();\n                break;\n        }\n\n        $(\"#BtnSearchSubmit\").click(function (){\n            $(\"#list-type\").val(2);\n            return true;\n        });\n\n        // 表示変更時\n        $(\"input[name='ViewSetting[list_type]']\").change(() => {\n            $.bcUtil.showLoader();\n            switch ($(\"input[name='ViewSetting[list_type]']:checked\").val()) {\n                case \"1\":\n                    loadTree()\n                    break;\n                case \"2\":\n                    loadTable();\n                    break;\n            }\n        });\n    }\n\n    /**\n     * 現在のサイトIDを取得\n     * @returns {string|number}\n     */\n    function getCurrentSiteId() {\n        const urlSearchParams = new URLSearchParams(window.location.search);\n        const params = Object.fromEntries(urlSearchParams.entries());\n        return params.site_id ?? 1;\n    }\n\n    /**\n     * 表形式のリストをロードする\n     */\n    function loadTable() {\n        let url = $.bcUtil.adminBaseUrl + 'baser-core' + '/contents/index?';\n        $(\"#list-type\").val(2);\n        location.href = url + decodeURI($(\"#ContentIndexForm\").serialize());\n    }\n\n    /**\n     * ツリーを読み込む\n     */\n    function loadTree() {\n        location.href = $.bcUtil.adminBaseUrl + 'baser-core' + '/contents/index?list_type=1';\n    }\n\n    /**\n     * ツリーの初期化\n     */\n    function initTree() {\n        let scriptData = $(\"#AdminContentsIndexScript\");\n        $.bcTree.init({\n            isAdmin: scriptData.attr('data-isAdmin'),\n            isUseMoveContents: scriptData.attr('data-isUseMoveContents'),\n            adminPrefix: scriptData.attr('data-adminPrefix'),\n            baserCorePrefix: scriptData.attr('data-baserCorePrefix'),\n            editInIndexDisabled: scriptData.attr('data-editInIndexDisabled'),\n        });\n        // マウスダウンイベント\n        $(window).bind(\"mousedown\", $.bcTree.updateShiftAndCtrlOnAnchor);\n        $(\"#BtnOpenTree\").click(function () {\n            $.bcTree.jsTree.open_all();\n        });\n        $(\"#BtnCloseTree\").click(function () {\n            $.bcTree.jsTree.close_all();\n            $.bcTree.jsTree.open_node($.bcTree.jsTree.get_json(), false, false);\n        });\n        // 新規追加クリック時\n        $(\"#BtnAddContent\").click($.bcTree.showMenuByOuter);\n\n        // ドラッグ＆ドロップイベント\n        $(document).on(\"dnd_stop.vakata\", $.bcTree.orderContent);\n        $(document).on(\"dnd_start.vakata\", $.bcTree.changeDnDCursor);\n        $.bcUtil.disabledHideMessage = true;\n        $($.bcTree).bind('loaded', function () {\n            $.bcUtil.disabledHideMessage = false;\n        });\n        $.bcTree.load();\n    }\n});\n"],"names":["$","listType","val","mode","undefined","scriptData","grpChangeTreeOpenClose","bcTree","init","isAdmin","attr","isUseMoveContents","adminPrefix","baserCorePrefix","editInIndexDisabled","window","bind","updateShiftAndCtrlOnAnchor","click","jsTree","open_all","close_all","open_node","get_json","showMenuByOuter","document","on","orderContent","changeDnDCursor","bcUtil","disabledHideMessage","load","show","bcBatch","batchUrl","apiAdminBaseUrl","hide","change","showLoader","location","href","adminBaseUrl","url","decodeURI","serialize","initView"],"sourceRoot":""}