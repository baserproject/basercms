{"version":3,"file":"bc_uploader/js/admin/uploader_files/ckeditor_uploader.bundle.js","mappings":"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","sources":["webpack://bc-admin-third/./src/bc_uploader/js/admin/uploader_files/ckeditor_uploader.js"],"sourcesContent":["/**\n * baserCMS :  Based Website Development Project <https://basercms.net>\n * Copyright (c) NPO baser foundation <https://baserfoundation.org/>\n *\n * @copyright     Copyright (c) NPO baser foundation\n * @link          https://basercms.net baserCMS Project\n * @since         5.0.0\n * @license       https://basercms.net/license/index.html MIT License\n */\n\n/**\n * ファイルアップロードダイアログ用CKEditorスクリプト\n */\n\nif (!CKEDITOR.dialog.exists('Image')) {\n\n    CKEDITOR.dialog.add('baserUploaderDialog', function (editor) {\n        return {\n            title: bcI18n.ckeditorTitle,\n            minWidth: 1000,\n            minHeight: 510,\n            whiteSpace: 'normal',\n            /**\n             * ダイアログ 起動イベント\n             **/\n            onShow: function () {\n                this.editMode = false;\n                var element = this.getParentEditor().getSelection().getSelectedElement();\n                var selection = this.getParentEditor().getSelection();\n                var ranges = selection.getRanges();\n                var imgFlg = false;\n                var formElements2 = $(\"#\" + this.getContentElement('info', 'formElements2').domId).show();\n\n                if (element && element.getName() == 'img') {\n                    this.editMode = true;\n                    imgFlg = true;\n\n                } else if (ranges.length == 1) {\n                    var rangeRoot = ranges[0].getCommonAncestor(true);\n                    element = rangeRoot.getAscendant('a', true);\n                    if (element && element.getAttribute('href')) {\n                        selection.selectElement(element);\n                        formElements2.hide();\n                    }\n                }\n                this.setupContent(element, imgFlg);\n            },\n            /**\n             * OKボタン クリックイベント\n             **/\n            onOk: function () {\n\n                var txtUrl = this.getContentElement('info', 'txtUrl');\n                var url = txtUrl.getValue();\n                var element;\n                var imgFlg;\n\n                if (!url) {\n                    alert(bcI18n.ckeditorAlertMessage1);\n                    return false;\n                }\n\n                if (isImage(url)) {\n                    // エディタにタグを配置\n                    element = editor.document.createElement('img');\n                    element.setAttribute('alt', '');\n                    imgFlg = true;\n                } else {\n                    element = editor.document.createElement('a');\n                    element.setAttribute('title', '');\n                    element.setAttribute('class', 'file-link');\n                    element.setAttribute('target', '_blank');\n                    imgFlg = false;\n                }\n\n                // 各コントロールの完了処理を実行\n                this.commitContent(element, imgFlg);\n\n                if (imgFlg) {\n                    var rdoSize = $(\"#\" + this.getContentElement('info', 'rdoSize').domId);\n                    if (!this.editMode) {\n                        // リンク先用に最大サイズを取得\n                        var size = '';\n                        if (this.getValueOf('info', 'rdoSize')) {\n                            if (!rdoSize.find('input[type=radio]').eq(3).prop('disabled')) {\n                                size = 'large';\n                            } else if (!rdoSize.find('input[type=radio]').eq(2).prop('disabled')) {\n                                size = 'midium';\n                            } else if (!rdoSize.find('input[type=radio]').eq(1).prop('disabled')) {\n                                size = 'small';\n                            }\n                        }\n                        var src = getFilePath(element.getAttribute('src'), size);\n                        var linkElement = editor.document.createElement('a');\n                        linkElement.setAttribute('href', src);\n                        linkElement.setAttribute('rel', 'colorbox');\n                        linkElement.setAttribute('title', element.getAttribute('alt'));\n                        linkElement.append(element, false);\n\n                        if (this.getContentElement('info', 'chkCaption').getValue()) {\n                            var imageSettings = $.parseJSON($(\"#CkeditorUploaderScript\").attr('data-imageSettings'));\n                            var width;\n                            if (this.getValueOf('info', 'rdoSize')) {\n                                width = imageSettings[this.getValueOf('info', 'rdoSize')]['width'];\n                            }\n                            var box = editor.document.createElement('div');\n                            var caption = editor.document.createElement('div');\n                            box.setAttribute('class', 'bc-caption');\n                            if (width) {\n                                box.setAttribute('style', 'width:' + width + 'px');\n                            }\n                            caption.setAttribute('class', 'bc-caption-text');\n                            caption.appendHtml(this.getContentElement('info', 'txtAlt').getValue());\n                            box.append(linkElement);\n                            box.append(caption);\n                            linkElement = box;\n                        }\n\n                        element = linkElement;\n                    }\n                }\n\n                editor.insertElement(element);\n\n                $(\"#EditDialog\").remove();\n\n                return true;\n\n            },\n            /**\n             * キャンセルボタン クリックイベント\n             */\n            onCancel: function () {\n                $(\"#EditDialog\").remove();\n            },\n            /**\n             * コンテンツプロパティ\n             **/\n            contents: [\n                {\n                    id: 'info',\n                    label: bcI18n.ckeditorInfoLabel,\n                    title: bcI18n.ckeditorInfoTitle,\n                    elements: [\n                        {\t/* フォーム要素１列目 */\n                            id: 'formElements1',\n                            type: 'hbox',\n                            padding: 0,\n                            widths: ['45%', '45%', '10%'],\n                            children: [\n                                {   /* URL */\n                                    id: 'txtUrl',\n                                    type: 'text',\n                                    label: 'URL',\n                                    style: 'margin-right : 10px;',\n                                    setup: function (element, imgFlg) {\n                                        if (element) {\n                                            if (imgFlg) {\n                                                this.setValue(decodeURI(element.getAttribute('src')));\n                                            } else {\n                                                this.setValue(decodeURI(element.getAttribute('href')));\n                                            }\n                                        }\n                                        var txtUrl = $(\"#\" + this.domId).find('input');\n                                        var dialog = this.getDialog();\n                                        // イベントを登録\n                                        txtUrl.bind('keyup', function () {\n                                            var formElements2 = $(\"#\" + dialog.getContentElement('info', 'formElements2').domId);\n                                            if (isImage($(this).val())) {\n                                                formElements2.show(200);\n                                            } else {\n                                                formElements2.hide(200);\n                                            }\n                                        });\n                                    },\n                                    commit: function (element, imgFlg) {\n                                        if (imgFlg) {\n                                            element.setAttribute('src', decodeURI(this.getValue()));\n                                        } else {\n                                            element.setAttribute('href', decodeURI(this.getValue()));\n                                        }\n                                    }\n                                },\n                                {   /* 説明文 */\n                                    id: 'txtAlt',\n                                    type: 'text',\n                                    label: bcI18n.ckeditorDescriptionLabel,\n                                    style: 'margin-right : 10px;',\n                                    setup: function (element, imgFlg) {\n                                        if (element) {\n                                            if (imgFlg) {\n                                                this.setValue(element.getAttribute('alt'));\n                                            } else {\n                                                this.setValue(element.getText());\n                                            }\n                                        }\n                                    },\n                                    commit: function (element, imgFlg) {\n                                        if (imgFlg) {\n                                            element.setAttribute('alt', this.getValue());\n                                        } else {\n                                            element.setAttribute('title', this.getValue());\n                                            element.appendHtml(this.getValue());\n                                        }\n                                    }\n                                },\n                                {   /* キャプション */\n                                    id: 'chkCaption',\n                                    type: 'checkbox',\n                                    label: bcI18n.ckeditorCaptionLabel,\n                                    style: 'margin-top:20px;'\n                                }\n                            ]\n                        },\n                        {\t/* フォーム要素２列目 */\n                            id: 'formElements2',\n                            type: 'hbox',\n                            padding: 0,\n                            widths: ['25%', '25%', '25%', '25%'],\n                            children: [\n                                {   /* 横間隔 */\n                                    id: 'txtHspace',\n                                    type: 'text',\n                                    label: bcI18n.ckeditorHspaceLabel,\n                                    style: 'margin-right : 10px;',\n                                    setup: function (element, imgFlg) {\n\n                                        if (!imgFlg) {\n                                            return;\n                                        }\n\n                                        if (element) {\n                                            if (element.getAttribute('hspace')) {\n                                                this.setValue(element.getAttribute('hspace'));\n                                            }\n                                        }\n                                    },\n                                    commit: function (element, imgFlg) {\n\n                                        if (!imgFlg) {\n                                            return;\n                                        }\n\n                                        var value = '0';\n                                        if (this.getValue()) {\n                                            value = this.getValue();\n                                        }\n                                        if (value > 0) {\n                                            element.setStyle('margin-left', value + 'px');\n                                            element.setStyle('margin-right', value + 'px');\n                                            element.setAttribute('hspace', value);\n                                        }\n                                    }\n                                },\n                                {   /* 縦間隔 */\n                                    id: 'txtVspace',\n                                    type: 'text',\n                                    label: bcI18n.ckeditorVspaceLabel,\n                                    style: 'margin-right : 10px;',\n                                    setup: function (element, imgFlg) {\n\n                                        if (!imgFlg) {\n                                            return;\n                                        }\n\n                                        if (element && element.getAttribute('vspace')) {\n                                            this.setValue(element.getAttribute('vspace'));\n                                        }\n\n                                    },\n                                    commit: function (element, imgFlg) {\n\n                                        if (!imgFlg) {\n                                            return;\n                                        }\n\n                                        var value = '0';\n                                        if (this.getValue()) {\n                                            value = this.getValue();\n                                        }\n                                        if (value > 0) {\n                                            element.setStyle('margin-top', value + 'px');\n                                            element.setStyle('margin-bottom', value + 'px');\n                                            element.setAttribute('vspace', value);\n                                        }\n                                    }\n\n                                },\n                                {   /* 行揃え */\n                                    id: 'cmbAlign',\n                                    type: 'select',\n                                    /*style : 'width:90px',*/\n                                    label: bcI18n.ckeditorAlignLabel,\n                                    'default': '',\n                                    items: [\n                                        [editor.lang.common.notSet, ''],\n                                        [bcI18n.ckeditorLeft, 'left'],\n                                        [bcI18n.ckeditorAbsBottom, 'absBottom'],\n                                        [bcI18n.ckeditorAbsMiddle, 'absMiddle'],\n                                        [bcI18n.ckeditorBaseline, 'baseline'],\n                                        [bcI18n.ckeditorBottom, 'bottom'],\n                                        [bcI18n.ckeditorMiddle, 'middle'],\n                                        [bcI18n.ckeditorRight, 'right'],\n                                        [bcI18n.ckeditorTextTop, 'textTop'],\n                                        [bcI18n.ckeditorTop, 'top']\n                                    ],\n                                    setup: function (element, imgFlg) {\n                                        if (!imgFlg) {\n                                            return;\n                                        }\n                                        if (element) {\n                                            this.setValue(element.getAttribute('align'));\n                                        }\n                                    },\n                                    commit: function (element, imgFlg) {\n\n                                        if (!imgFlg) {\n                                            return;\n                                        }\n\n                                        element.setAttribute('align', this.getValue());\n                                    }\n                                },\n                                {   /* サイズ */\n                                    id: 'rdoSize',\n                                    type: 'radio',\n                                    label: bcI18n.ckeditorSizeLabel,\n                                    'default': 'small',\n                                    items:\n                                        [\n                                            [bcI18n.ckeditorOriginSize, ''],\n                                            [bcI18n.ckeditorSmall, 'small'],\n                                            [bcI18n.ckeditorMidium, 'midium'],\n                                            [bcI18n.ckeditorLarge, 'large']\n                                        ],\n                                    setup: function (element, imgFlg) {\n\n                                        var dialog = this.getDialog();\n                                        var rdoSize = $(\"#\" + this.domId);\n                                        rdoSize.find('input[type=radio]').prop('disabled', true);\n                                        rdoSize.find('input[type=radio]').eq(0).prop('disabled', false);\n\n                                        rdoSize.find('input[type=radio]').click(function () {\n                                            if ($(this).prop('checked')) {\n                                                dialog.setValueOf('info', 'txtUrl', getFilePath(dialog.getValueOf('info', 'txtUrl'), dialog.getValueOf('info', 'rdoSize')));\n                                            }\n                                        });\n\n                                        if (element && imgFlg) {\n                                            // 画像のサイズを取得する\n                                            const url = $.bcUtil.apiAdminBaseUrl + 'bc-uploader/uploader_files/exists_images/' + getFileName(element.getAttribute('src'), '');\n                                            $.get(url, null, function (res) {\n                                                if (res.result) {\n                                                    rdoSize.find('input[type=radio]').eq(1).prop('disabled', !res.result.small);\n                                                    rdoSize.find('input[type=radio]').eq(2).prop('disabled', !res.result.midium);\n                                                    rdoSize.find('input[type=radio]').eq(3).prop('disabled', !res.result.large);\n                                                } else {\n                                                    rdoSize.find('input[type=radio]').prop('disabled', true);\n                                                }\n                                            }, 'json');\n                                            this.setValue(getSizeByFile(element.getAttribute('src')));\n                                        }\n                                    },\n                                    commit: function (element, imgFlg) {\n\n                                        if (!imgFlg) {\n                                            return;\n                                        }\n\n                                    }\n                                }\n                            ]\n                        },\n                        {   /* fileManager */\n                            id: 'fileManager',\n                            type: 'vbox',\n                            padding: 0,\n                            children: [],\n                            setup: function () {\n                                var fileList = $(\"#\" + this.domId);\n\n                                var inner = '<div id=\"UploaderSearch\" class=\"corner5\" style=\"display:none\"></div>' +\n                                    '<div class=\"inner\" style=\"text-align:center\"><img style=\"margin-top:120px\" src=\"' + $(\"#CkeditorUploaderScript\").attr('data-loaderUrl') + '\" /></div>';\n                                fileList.html(inner);\n\n                                var dialog = this.getDialog();\n                                var listId = Math.floor(Math.random() * 99999999 + 1);\n                                $.ajax({\n                                    type: \"GET\",\n                                    dataType: \"html\",\n                                    url: $.bcUtil.adminBaseUrl + \"bc-uploader/uploader_files/ajax_get_search_box/\" + listId,\n                                    success: function (res) {\n                                        $(\"#UploaderSearch\").html(res);\n                                        $(\"#UploaderSearch\").slideDown();\n                                    },\n                                    error: function (msg, textStatus, errorThrown) {\n                                        alert(textStatus);\n                                    }\n                                });\n                                $.ajax({\n                                    type: \"GET\",\n                                    dataType: \"html\",\n                                    url: $.bcUtil.adminBaseUrl + \"bc-uploader/uploader_files/ajax_index/\" + listId,\n                                    success: function (res) {\n\n                                        // リストをセット\n                                        fileList.find('.inner').html(res);\n\n                                        // リストのロード完了イベント\n                                        $(\"#FileList\" + listId).bind('filelistload', function () {\n\n                                            // ファイル選択イベント\n                                            $('.selectable-file').click(function () {\n\n                                                // URLの拡張子で画像かどうかを判別\n                                                // ※ URLを直接入力する場合もあるので拡張子で判断\n                                                var filePath = $(this).find(\"span.url\").html().trim();\n                                                var fileName = $(this).find(\"span.name\").html();\n                                                var formElements2 = $(\"#\" + dialog.getContentElement('info', 'formElements2').domId);\n\n                                                if (isImage(fileName)) {\n                                                    formElements2.show(200);\n                                                    var rdoSize = $(\"#\" + dialog.getContentElement('info', 'rdoSize').domId);\n                                                    rdoSize.find('input[type=radio]').prop('disabled', true);\n                                                    rdoSize.find('input[type=radio]').eq(0).prop('disabled', false);\n                                                    if ($(this).find('.small').html()) {\n                                                        rdoSize.find('input[type=radio]').eq(1).prop('checked', true);\n                                                        rdoSize.find('input[type=radio]').eq(1).prop('disabled', false);\n                                                    } else {\n                                                        rdoSize.find('input[type=radio]').eq(0).prop('checked', true);\n                                                    }\n                                                    if ($(this).find('.midium').html()) {\n                                                        rdoSize.find('input[type=radio]').eq(2).prop('disabled', false);\n                                                    }\n                                                    if ($(this).find('.large').html()) {\n                                                        rdoSize.find('input[type=radio]').eq(3).prop('disabled', false);\n                                                    }\n                                                } else {\n                                                    // 縦間隔・横間隔・行揃え・サイズを非表示\n                                                    formElements2.hide(200);\n                                                }\n\n                                                /* 対象サイズのURLと説明文をセットする */\n                                                dialog.setValueOf('info', 'txtUrl', getFilePath(filePath, dialog.getValueOf('info', 'rdoSize')));\n                                                dialog.setValueOf('info', 'txtAlt', $(this).find('.alt').html());\n\n                                            });\n\n                                            $(\".selectable-file\").unbind('dblclick.dblclickEvent');\n\n                                        });\n\n                                        $(\"#FileList\" + listId).bind('deletecomplete', function () {\n                                            dialog.setValueOf('info', 'txtUrl', '');\n                                            dialog.setValueOf('info', 'txtAlt', '');\n                                        });\n\n                                    },\n                                    error: function (msg, textStatus, errorThrown) {\n                                        alert(textStatus);\n                                    }\n                                });\n                            }\n                        }\n                    ]\n                }\n            ]\n        };\n    });\n}\n\n/**\n * 画像ファイルかどうかを判断する\n */\nfunction isImage(url) {\n    ret = url.match(/.*?\\.([a-zA-Z0-9]*?)$/);\n    if (ret) {\n        ext = ret[1];\n        if (ext == 'png' || ext == 'gif' || ext == 'jpg') {\n            return true;\n        } else {\n            return false;\n        }\n    } else {\n        return false;\n    }\n}\n\n/**\n * ファイル名を取得する\n */\nfunction getFileName(url, size) {\n    var ret, file, ext, fileName;\n    ret = url.match(/\\/([^\\/]*?)\\.([a-zA-Z0-9]*?)$/);\n    if (ret) {\n        file = decodeURI(ret[1].replace(/__[a-z]*?$/, ''));\n        ext = ret[2];\n        if (size && isImage(url)) {\n            fileName = file + '__' + size + '.' + ext;\n        } else {\n            fileName = file + '.' + ext;\n        }\n        return fileName;\n    } else {\n        return url;\n    }\n}\n\n/**\n * ファイルパスを取得する\n */\nfunction getFilePath(url, size) {\n    var ret, fileName;\n    fileName = getFileName(url, size);\n    ret = url.match(/^(.*\\/)([^\\/]*?)\\.([a-zA-Z0-9]*?)$/);\n    if (ret) {\n        return ret[1] + fileName;\n    } else {\n        return url;\n    }\n}\n\n/**\n * ファイル名からファイルのサイズを取得\n */\nfunction getSizeByFile(url) {\n    var ret = url.match(/__([a-z]*?)\\.[a-zA-Z0-9]*?$/);\n    if (ret) {\n        return ret[1];\n    } else {\n        return '';\n    }\n}\n"],"names":["isImage","url","ret","match","ext","getFileName","size","file","decodeURI","replace","getFilePath","fileName","CKEDITOR","dialog","exists","add","editor","title","bcI18n","ckeditorTitle","minWidth","minHeight","whiteSpace","onShow","this","editMode","element","getParentEditor","getSelection","getSelectedElement","selection","ranges","getRanges","imgFlg","formElements2","$","getContentElement","domId","show","getName","length","getCommonAncestor","getAscendant","getAttribute","selectElement","hide","setupContent","onOk","getValue","alert","ckeditorAlertMessage1","document","createElement","setAttribute","commitContent","rdoSize","getValueOf","find","eq","prop","src","linkElement","append","width","imageSettings","parseJSON","attr","box","caption","appendHtml","insertElement","remove","onCancel","contents","id","label","ckeditorInfoLabel","ckeditorInfoTitle","elements","type","padding","widths","children","style","setup","setValue","txtUrl","getDialog","bind","val","commit","ckeditorDescriptionLabel","getText","ckeditorCaptionLabel","ckeditorHspaceLabel","value","setStyle","ckeditorVspaceLabel","ckeditorAlignLabel","items","lang","common","notSet","ckeditorLeft","ckeditorAbsBottom","ckeditorAbsMiddle","ckeditorBaseline","ckeditorBottom","ckeditorMiddle","ckeditorRight","ckeditorTextTop","ckeditorTop","ckeditorSizeLabel","ckeditorOriginSize","ckeditorSmall","ckeditorMidium","ckeditorLarge","click","setValueOf","bcUtil","apiAdminBaseUrl","get","res","result","small","midium","large","getSizeByFile","fileList","inner","html","listId","Math","floor","random","ajax","dataType","adminBaseUrl","success","slideDown","error","msg","textStatus","errorThrown","filePath","trim","unbind"],"sourceRoot":""}