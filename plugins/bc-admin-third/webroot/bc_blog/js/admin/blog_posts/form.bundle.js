/**
 * baserCMS :  Based Website Development Project <https://basercms.net>
 * Copyright (c) NPO baser foundation <https://baserfoundation.org/>
 *
 * @copyright     Copyright (c) NPO baser foundation
 * @link          https://basercms.net baserCMS Project
 * @since         5.0.0
 * @license       https://basercms.net/license/index.html MIT License
 */
$((function(){var e=$("#AdminBlogBLogPostsEditScript").attr("data-fullurl"),t=$("#AdminBlogBLogPostsEditScript").attr("data-previewurl"),o=$("#AdminBlogBLogPostsEditScript").attr("data-blogContentId");$("input[type=text]").each((function(){$(this).keypress((function(e){return!e.which||13!==e.which}))})),document.queryCommandSupported("copy")||$("#BtnCopyUrl").hide(),$("#BtnCopyUrl").click((function(){var t=$('<textarea style=" opacity:0; width:1px; height:1px; margin:0; padding:0; border-style: none;"/>');return t.text(e),$(this).after(t),t.select(),document.execCommand("copy"),t.remove(),!1})),$("#BtnPreview").click((function(){window.open("","preview");var o=$(this).parents("form"),a=o.attr("action"),n="default",r=t;return"draft"==$("#ContentPreviewMode").val()&&(n="draft"),r.match(/\?/)?r+="&url="+e+"&preview="+n:r+="?url="+e+"&preview="+n,void 0!==$.bcCkeditor.editor.editor_detail_tmp&&$.bcCkeditor.editor.editor_detail_tmp.execCommand("synchronize"),o.attr("target","preview"),o.attr("action",r),o.submit(),o.attr("target","_self"),o.attr("action",a),$.get($.baseUrl()+"/baser-core/bc_form/get_token?requestview=false",(function(e){$('input[name="_csrfToken"]').val(e)})),!1})),$("#BtnSave").click((function(){return $.bcUtil.showLoader(),void 0!==$.bcCkeditor.editor.editor_detail_tmp&&$.bcCkeditor.editor.editor_detail_tmp.execCommand("synchronize"),$("#BlogPostMode").val("save"),$.bcToken.check((function(){$("#BlogPostForm").submit()}),{useUpdate:!1,hideLoader:!1}),!1})),$("#BlogTagName").keypress((function(e){return!(e.which&&13===e.which||e.keyCode&&13===e.keyCode)||($("#BtnAddBlogTag").click(),!1)})),$("#BtnAddBlogTag").click((function(){return!!$("#blog-tag-name").val()&&($.bcToken.check((function(){return $.ajax({type:"POST",url:$.bcUtil.apiAdminBaseUrl+"bc-blog/blog_tags/add.json",data:{name:$("#blog-tag-name").val(),_csrfToken:$.bcToken.key},dataType:"json",beforeSend:function(){$("#BtnAddBlogTag").prop("disabled",!0),$("#BtnAddBlogTagloaderkey").length||$.bcUtil.showLoader("after","#BtnAddBlogTag","BtnAddBlogTagloaderkey")},success:function(e){if(e){var t=$('<span class="bca-checkbox"/>').append($('<input type="checkbox" name="blog_tags[_ids][]" class="bca-checkbox__input" />').val(e.blogTag.id).attr("id","blog-tags-ids-"+e.blogTag.id)).append($('<label class="bca-checkbox__label">').attr("for","blog-tags-ids-"+e.blogTag.id).html(e.blogTag.name));$("#BlogTags").append(t),$('input[name="blog_tags[_ids][]"]').last().prop("checked",!0),$("#blog-tag-name").val("")}else alert(bcI18n.alertMessage1)},error:function(){alert(bcI18n.alertMessage2)},complete:function(e,t){$("#BtnAddBlogTag").removeAttr("disabled"),$.bcUtil.hideLoader("after","#BtnAddBlogTag","BtnAddBlogTagloaderkey"),$("#BlogTags").effect("highlight",{},1500)}})}),{loaderType:"after",loaderSelector:"#BtnAddBlogTag",hideLoader:!1}),!1)})),$("#BtnAddBlogCategory").click((function(){return $("#AddBlogCategoryForm").dialog({width:"auto",modal:!0,open:function(){$(this).css("overflow","visible"),$(this.parentNode).css("overflow","visible")},close:function(){$("#blogcategory-title").val(""),$("#blogcategory-name").val("")},buttons:{cancel:{text:bcI18n.commonCancel,click:function(){$(this).dialog("close")}},save:{text:bcI18n.commonSave,click:function(){return function(e,t,o){t||(t=o),$.bcToken.check((function(){return $.ajax({type:"post",url:$.bcUtil.apiAdminBaseUrl+"bc-blog/blog_categories.json",data:{blog_content_id:e,name:t,title:o,_csrfToken:$.bcToken.key},beforeSend:function(){$("#BtnAddBlogCategory").prop("disabled",!0),$.bcUtil.showLoader()},success:function(e){e?$("#blog-category-id").append($("<option />").val(e.blogCategory.id).text(e.blogCategory.title).prop("selected",!0)):alert(bcI18n.alertMessage3),$("#AddBlogCategoryForm").dialog("close")},error:function(e){if(e.responseJSON.errors){var t=[],o=e.responseJSON.errors;Object.keys(o).forEach((function(e){Object.keys(o[e]).forEach((function(a){t.push(o[e][a])}))})),alert(bcI18n.alertMessage4+"\n\n"+t.join("\n"))}else alert(bcI18n.alertMessage4)},complete:function(e,t){$("#BtnAddBlogCategory").removeAttr("disabled"),$.bcUtil.hideLoader(),$("#BlogPostBlogCategoryId").effect("highlight",{},1500)}})}),{hideLoader:!1})}(o,$("#blogcategory-name").val(),$("#blogcategory-title").val()),!1}}}}),!1}))}));
//# sourceMappingURL=form.bundle.js.map