(()=>{
/**
 * baserCMS :  Based Website Development Project <https://basercms.net>
 * Copyright (c) NPO baser foundation <https://baserfoundation.org/>
 *
 * @copyright     Copyright (c) NPO baser foundation
 * @link          https://basercms.net baserCMS Project
 * @since         5.0.0
 * @license       https://basercms.net/license/index.html MIT License
 */
var a={commentApprove:!1,authCaptcha:!1,captchaId:null,authCaptchaImageBaseUrl:null,mounted:function(){var e=$("#BlogCommentsScripts");a.commentApprove=e.attr("data-commentApprove"),a.authCaptcha=e.attr("data-authCaptcha"),a.captchaId=e.attr("data-captchaId"),a.authCaptchaImageBaseUrl=e.attr("data-authCaptchaImageBaseUrl"),a.initView(),a.registerEvents()},registerEvents:function(){$("#BlogCommentAddButton").on("click",(function(){return a.validate()&&a.sendComment(),!1}))},initView:function(){a.authCaptcha&&a.loadAuthCaptcha(),$("#name").val(""),$("#email").val(""),$("#url").val(""),$("#message").val("")},sendComment:function(){$("#BlogCommentAddButton").prop("disabled",!0),$.bcToken.check((function(){var e=$("#BlogCommentAddForm");return e.find('input[name="_csrfToken"]').remove(),e.append($.bcToken.getHiddenToken()),$.ajax({url:$.bcUtil.baseUrl+"/bc-blog/blog/ajax_add_comment",type:"POST",data:e.serialize(),dataType:"html",beforeSend:function(){$("#ResultMessage").slideUp()},success:function(e){if(a.authCaptcha&&(a.loadAuthCaptcha(),$("#BlogCommentAuthCaptcha").val("")),e){a.initView(),$("#BlogCommentAuthCaptcha").val("");var t="";if(a.commentApprove)t=bcI18n.alertMessageAuthComplete,$("#ResultMessage").html(t).show();else{var n=$(e);n.hide(),$("#BlogCommentList").append(n),n.slideDown(500),location.hash=n.attr("id")}}else a.postError()},error:function(e){a.postError(e)},complete:function(){$.bcToken.key=null,$("#BlogCommentAddButton").removeAttr("disabled")}})}),{useUpdate:!1})},postError:function(e){a.authCaptcha&&(a.loadAuthCaptcha(),$("#BlogCommentAuthCaptcha").val(""));var t=bcI18n.alertMessageError;e.responseText&&(response=JSON.parse(e.responseText)),t+="<br>"+response.message,response.errors&&Object.keys(response.errors).forEach((function(a){Object.keys(response.errors[a]).forEach((function(e){t+="<br>"+response.errors[a][e]}))})),$("#ResultMessage").html(t).slideDown()},validate:function(){var e="";return $("#name").val()||(e+=bcI18n.alertMessageName+"\n"),$("#message").val()||(e+=bcI18n.alertMessageComment+"\n"),a.authCaptcha&&($("#auth-captcha").val()||(e+=bcI18n.alertMessageAuthImage+"\n")),!e||(alert(e),!1)},loadAuthCaptcha:function(){if(a.authCaptcha){var e=$("#AuthCaptchaImage"),t=$("#CaptchaLoader");e.hide(),t.show(),e.on("load",(function(){t.hide(),e.fadeIn(1e3)})),e.attr("src",a.authCaptchaImageBaseUrl+"/"+a.captchaId)}}};a.mounted()})();
//# sourceMappingURL=blog_comment.bundle.js.map